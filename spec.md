# Техническое задание: Мобильное приложение "Oson Bozorlik"

## Общее описание
Проект представляет собой мобильное приложение для интернет-магазина продуктов питания, разработанное на фреймворке **Flutter**. Основная цель приложения — предоставить пользователям удобный интерфейс для выбора и покупки товаров по категориям.

- **Валюта приложения**: Узбекский сум (**SOM**). Во всем приложении цены указываются в формате "Цена SOM" (например, 5600 SOM).

## Главный экран (Main Screen)

### Хедер (Header / AppBar)
- **Слева**: Иконка меню (гамбургер, три горизонтальные линии).
- **По центру**: Виджет выбора адреса.
  - Состав: Иконка местоположения (pin/place), текст "Выберите адрес", иконка стрелки вниз (dropdown).
  - При нажатии открывается функционал выбора или смены адреса доставки.
- **Справа**: Иконка уведомлений (колокольчик).

### Основной контент
Главный экран состоит из блоков категорий товаров. Каждый блок является кликабельным и ведет в соответствующий раздел каталога.

#### Список категорий:
1.  **Фрукты**
2.  **Овощи**
3.  **Масло, яйца, молоко и другие продукты**
4.  **Мука и зерновые продукты**
5.  **Чаи и кофе**
6.  **Средства гигиены и чистящие средства**
7.  **Напитки**

*Примечание: Для каждого блока категории предусмотрены готовые фотографии.*

### Плавающая кнопка поиска (Floating Search Button)
- В нижней правой части экрана должна располагаться кнопка поиска.
- Кнопка должна быть "приклеена" (pinned) и перемещаться (float) поверх контента при скролле.
- Иконка: Поиск (лупа).

## Навигация
- Нажатие на категорию -> Переход к экрану категории (Category Screen).
- Нажатие на карточку товара -> Переход к экрану деталей товара (Product Details Screen).
- Нажатие на иконку меню -> Открытие бокового меню (Drawer).
- Нажатие на поиск -> Переход к экрану поиска товаров.

## Экран категории (Category Screen)
Этот экран открывается при выборе конкретной категории на главном экране.

### Хедер (Header / AppBar)
- **Слева**: Иконка "Назад" (стрелка влево).
- **По центру**: Название текущей категории (например, "Фрукты").
- **Справа**: Иконка "Поиск" (лупа).

### Подкатегории (Tabs)
- Горизонтальный скроллящийся список табов (подкатегорий) под хедером.
- **Первый таб**: Название основной категории (например, "Все фрукты" или просто "Фрукты"), отображает весь список товаров.
- **Остальные табы**: Подкатегории (например, "Цитрусовые", "Тропические фрукты" и т.д.).
- **Логика работы**: При нажатии на таб происходит автоматический скролл (anchor scroll) к соответствующему разделу на странице.

### Список товаров (Product Grid)
- Отображение товаров в виде сетки: **2 карточки в ряд**.
- Порядок отображения: Сначала идут товары общей категории, затем блоки подкатегорий (согласно табам).

### Карточка товара (Product Card)
Состав карточки:
1.  **Изображение товара**.
2.  **Название**: Например, "Яблоко золотое местное".
3.  **Цена**: Указывается цена за единицу измерения (например, за 1 кг).
4.  **Управление весом/количеством**:
    - Шаг изменения: **500 грамм** (для весовых товаров).
    - Индикатор набранного веса/суммы: Располагается на подложке бледного-бледно-зеленого цвета. Показывает текущую сумму за выбранный вес данного товара.
5.  **Статус "Нет в наличии"**:
    - Если товар недоступен, карточка становится бледной (полупрозрачной).
    - Поверх или снизу выводится текст: "Нет в наличии".
    - Кнопки добавления/изменения веса блокируются.

## Экран деталей товара (Product Details Screen)
Открывается при нажатии на карточку товара.

### Хедер (Header / AppBar)
- **Слева**: Иконка "Назад" (стрелка влево).
- **Справа**: Опционально иконка "Поделиться" или "Избранное" (по необходимости).

### Контент экрана
1.  **Большое изображение товара**:
    - Занимает примерно **50% высоты экрана**.
    - Качественное фото фрукта/продукта.
2.  **Информационный блок**:
    - **Название**: Крупный шрифт (например, "Apple Crebston местный").
    - **Цена**: Цена за килограмм (или другую единицу измерения).
    - **Описание**: Текстовый блок с описанием сорта, вкусовых качеств или других характеристик товара.
3.  **Нижняя панель (Bottom Action Bar)**:
    - **Выбор веса**: Управление количеством с шагом **500 грамм**.
    - **Кнопка "Добавить в корзину"**: Яркая, акцентная кнопка для подтверждения выбора.

## Экран поиска (Search Screen)
Открывается при нажатии на плавающую кнопку поиска или иконку поиска в хедере.

### Хедер (Header / AppBar)
- **Слева**: Иконка "Назад" (стрелка влево).
- **По центру**: Поле ввода (Input) с текстом-подсказкой "Поиск".
- **Логика ввода**: 
    - При появлении текста в поле ввода, справа в инпуте появляется иконка "Крестик" (Clear icon) для быстрой очистки введенного запроса.

### Результаты поиска
- **Живой поиск**: Поиск должен начинаться сразу при вводе символов.
- **Логика фильтрации**: 
    - Поиск осуществляется по любому совпадению в названии товара (даже по одной букве).
    - Если совпадения найдены, отображается список всех подходящих товаров (в формате карточек, аналогично экрану категорий).
- **Пустое состояние (Empty State)**: 
    - Если по введенному запросу ничего не найдено, отображается текст "Ничего не найдено".

## Авторизация и Регистрация (Auth & Registration)

### Экран Входа (Login Screen)
- **Методы входа**:
    1.  **Email + Пароль**: Поля для ввода почты и пароля, кнопка "Войти".
    2.  **Google Auth**: Кнопка быстрого входа через Google аккаунт.
- **Переход**: Ссылка "Зарегистрироваться" для новых пользователей.

### Экран Регистрации (Registration Screen)
- **Поля для ввода**:
    1.  **Имя**: Текстовое поле для ввода имени пользователя.
    2.  **Телефон**: Поле для ввода номера телефона (с маской).
    3.  **E-mail**: Поле для ввода адреса электронной почты.
    4.  **Пароль**: Поле для создания пароля.
- **Согласие**: Чекбокс "Согласен с условиями обработки персональных данных" (обязателен для активации кнопки регистрации).
- **Альтернативный вход**: Возможность регистрации через **Google аккаунт**.
- **Кнопка**: "Зарегистрироваться" (становится активной после заполнения всех обязательных полей и принятия условий).

## Профиль (Profile Screen)

### Верхняя часть (User Header)
- **Аватарка**: Круглая иконка пользователя. В центре круга расположена стандартная иконка "человека" (User icon).
- **Информация**:
    - Имя пользователя.
    - E-mail адрес.

### Основные пункты меню
1.  **Последние заказы**: Переход к списку истории заказов.
2.  **Выбор языка**: Переключатель или выпадающий список. Доступные языки:
    - **Узбекский**
    - **Русский**
    - **Английский**

### Информационный блок
1.  **О приложении**: Информация о проекте.
2.  **Публичная оферта**: Юридический документ.
3.  **Политика конфиденциальности**: Условия обработки данных.
4.  **Версия приложения**: `1.0.0` (статичный текст в нижней части экрана).

## Корзина (Cart Screen)

### Хедер (Header / AppBar)
- **Слева**: Иконка "Назад".
- **По центру**: Заголовок "Корзина".
- **Справа**: Кнопка "Очистить корзину".
    - При нажатии появляется **Pop-up (диалоговое окно)** с вопросом: "Действительно ли вы хотите очистить корзину?". Варианты: Да / Отмена.

### Список товаров
- Товары отображаются списком (по одному в ряд).
- **Состав строки товара**:
    - Слева: Миниатюра изображения.
    - Справа: Название продукта, цена за единицу (например, "5600 SOM").
    - Кнопка "Удалить" (иконка корзины или крестик) для каждого товара.

### Нижняя панель (Pinned Bottom Bar)
- **Информационный текст**: "У вас [X] товара стоимостью [Y] SOM".
- **Кнопка**: "Оформить заказ" (большая, акцентная).
- **Валидация**:
    - Если в корзине есть товары со статусом "Нет в наличии", кнопка "Оформить заказ" блокируется.
    - Выводится предупреждение: "Пожалуйста, удалите из корзины товары, которые сейчас недоступны".

## Оформление заказа (Checkout Screen)

### Разделы экрана
1.  **Адрес доставки**:
    - Интерактивная плашка/блок "Адрес доставки".
    - При нажатии открывается экран или окно для ввода/выбора адреса.
2.  **Дата доставки**:
    - Выбор через табы или переключатели: **Сегодня** / **Завтра**.
3.  **Время доставки**:
    - Выбор временного интервала (табы):
        - 09:00 - 12:00
        - 12:00 - 15:00
        - 16:00 - 18:00
        - 18:00 - 20:00
4.  **Способ оплаты**:
    - Единственный доступный вариант: **Оплата при получении**.

### Кнопка подтверждения
- Большая кнопка внизу экрана: **"Оформить заказ на [Y] SOM"**.

## Панель администратора (Admin Panel / Web-Interface)
Для управления магазином используется веб-интерфейс (на базе Supabase Dashboard или отдельного Flutter Web приложения).

### Управление товарами (Product Management)
- **Список товаров**: Просмотр всех позиций с фильтрацией по категориям.
- **Действия**:
    - **Добавление**: Создание новой карточки (фото, название, цена, категория).
    - **Редактирование**: Изменение данных товара.
    - **Удаление**: Полное удаление товара из базы.
    - **Пауза (Stock Toggle)**: Возможность скрыть товар из продажи или поставить статус "Нет в наличии".

### Управление заказами (Order Management)
- **Текущие и история заказов**: Единый список с фильтрацией по статусу (Новый, В обработке, Завершен).
- **Поиск**: По номеру заказа или номеру телефона клиента.
- **Детали заказа**:
    - Номер заказа.
    - Список товаров и итоговая сумма.
    - Адрес, дата и время доставки.
    - Контактные данные клиента.

## Дизайн и UI/UX (Design & UI/UX)

### Цветовая палитра
- **Основной фон**: Чистый белый (#FFFFFF). Создает ощущение чистоты и легкости.
- **Акцентный зеленый**: Цвет "молодой листвы" или "травяной" зеленый. Используется для основных кнопок и активных элементов.
- **Темно-зеленый**: Для заголовков и важных элементов навигации.
- **Светло-зеленый (пастельный)**: Для подложек, индикаторов выбора веса и второстепенных блоков.

### Визуальный стиль
- **Концепция**: Легкий, современный, "диджитальный" дизайн с упором на качественный визуальный контент.
- **Карточки и изображения**: Большие, сочные фотографии продуктов. Скругление углов у карточек (BorderRadius) должно быть мягким (16-24 dp).
- **Типографика**: Использование современных гротескных шрифтов (например, Inter, Montserrat или SF Pro). Четкая иерархия заголовков.
- **UX-ориентиры**: Вдохновение интерфейсами ведущих сервисов доставки (Яндекс.Доставка, Wolt, Glovo). Приоритет — минимальное количество кликов до покупки.

### Анимации и микровзаимодействия
- **Плавность**: Использование `Hero` анимаций при переходе с карточки товара на экран деталей.
- **Обратная связь**: Мягкие анимации нажатия кнопок, плавное появление элементов списка.
- **Библиотеки**: Рекомендуется использование `Lottie` для иконок-подтверждений (например, после оформления заказа) и `Animate Do` для простых анимаций появления.

## Технические требования
- **Язык программирования**: Dart.
- **Фреймворк**: Flutter.
- **Управление состоянием (State Management)**: Provider.
- **Анимации**: `flutter_animate`, `lottie`.
- **Backend (Бэкенд)**: Supabase.
    - **Авторизация**: Supabase Auth (Email/Password, Google).
    - **База данных**: PostgreSQL (через Supabase).
    - **Хранение данных (Storage)**: Supabase Storage (для изображений товаров и аватарок).
- **Интеграция с Telegram**:
    - Уведомления о новых заказах должны поступать в Telegram-бота.
    - Реализация: Через **Supabase Edge Functions** (триггер на создание нового заказа в БД отправляет запрос к Telegram Bot API).
- **Ассеты**: Все изображения категорий должны быть размещены в директории `assets/images/`.
- **Скролл**: Реализация `ScrollController` или специализированных библиотек для синхронизации табов и позиции скролла (Anchor scrolling).

## Уведомления (Notifications)
Для реализации пуш-уведомлений предлагаются следующие варианты (необходимо выбрать один):

1.  **Firebase Cloud Messaging (FCM)** — *Рекомендуемый вариант*.
    - Стандарт индустрии для Android и iOS.
    - Отличная интеграция с Flutter через `firebase_messaging`.
    - Возможность отправки уведомлений через Supabase Edge Functions.
2.  **OneSignal**.
    - Простая настройка и удобная панель управления рассылками.
    - Хорошая поддержка Flutter.
    - Платно при больших объемах, но удобно для маркетинговых пушей.
3.  **Supabase Realtime + Local Notifications**.
    - Позволяет обновлять данные в приложении мгновенно, когда оно открыто.
    - В сочетании с `flutter_local_notifications` может имитировать пуши, но полноценные фоновые уведомления лучше делать через FCM.
